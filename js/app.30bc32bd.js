(function(){"use strict";var e={8326:function(e,t,s){var o=s(9242),a=s(3396);function n(e,t){const s=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)(a.HY,null,[((0,a.wg)(),(0,a.j4)(s,{name:"nav",key:e.key})),(0,a.Wm)(s,{name:"default"})],64)}var r=s(89);const l={},i=(0,r.Z)(l,[["render",n]]);var d=i,c=s(678);const u={class:"nav shadow d-flex justify-content-between align-items-center sticky-top"},g=(0,a.Uk)("後端功能演示"),m=(0,a.Uk)("Login");function h(e,t,s,o,n,r){const l=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("nav",u,[(0,a.Wm)(l,{to:"/",class:"logo"},{default:(0,a.w5)((()=>[g])),_:1}),(0,a._)("div",null,[(0,a._)("a",{class:"mx-5",onClick:t[0]||(t[0]=(...e)=>r.toMsgBoard&&r.toMsgBoard(...e))},"Message Board"),this.$store.state.notLogin?((0,a.wg)(),(0,a.j4)(l,{key:0,to:"/login"},{default:(0,a.w5)((()=>[m])),_:1})):(0,a.kq)("",!0),this.$store.state.notLogin?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("a",{key:1,href:"",onClick:t[1]||(t[1]=(...e)=>r.doLogout&&r.doLogout(...e))},"Logout"))])])}var p={data(){return{username:localStorage.getItem("userName")}},methods:{toMsgBoard:function(){console.log("username:",this.username),1==this.$store.state.notLogin?(alert("先登入吧!"),this.$router.push("/login")):this.$router.push("/messageboard")},doLogout:function(){localStorage.removeItem("userName"),this.$store.state.notLogin=!0,alert("已成功登出!"),this.$router.path("/")}},mounted(){var e=localStorage.getItem("userName");console.log("mounted:",e),this.$store.state.notLogin=!e}};const f=(0,r.Z)(p,[["render",h],["__scopeId","data-v-a701ccd6"]]);var v=f,_=s(7139);const b=e=>((0,a.dD)("data-v-31dea83b"),e=e(),(0,a.Cn)(),e),w={class:"login"},y={class:"container d-flex flex-column align-items-center"},x={class:"box"},k=b((()=>(0,a._)("h1",{class:"p-1"},"Login",-1))),M={class:"d-flex justify-content-center"},$=b((()=>(0,a._)("div",{class:"my-2"},"Username",-1))),L=b((()=>(0,a._)("div",{class:"my-2"},"Password",-1))),D={class:"d-flex justify-content-end"},C=(0,a.Uk)("create account"),j={class:"error"};function I(e,t,s,n,r,l){const i=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",w,[(0,a._)("div",y,[(0,a._)("div",x,[k,(0,a._)("div",M,[(0,a._)("form",null,[(0,a._)("div",null,[$,(0,a.wy)((0,a._)("input",{class:"textbox","onUpdate:modelValue":t[0]||(t[0]=e=>r.username=e),placeholder:"輸入帳號"},null,512),[[o.nr,r.username]])]),(0,a._)("div",null,[L,(0,a.wy)((0,a._)("input",{class:"textbox","onUpdate:modelValue":t[1]||(t[1]=e=>r.password=e),placeholder:"輸入密碼",type:"password"},null,512),[[o.nr,r.password]])]),(0,a._)("div",D,[(0,a.Wm)(i,{to:"/register"},{default:(0,a.w5)((()=>[C])),_:1})]),(0,a._)("div",j,(0,_.zw)(r.errorMsg),1),(0,a._)("button",{onClick:t[2]||(t[2]=(...e)=>l.dologin&&l.dologin(...e)),class:"button my-5"},"登入")])])])])])}var B=s(6265),U=s.n(B),N={data(){return{username:"",password:"",errorMsg:""}},methods:{dologin:function(){console.log("doLogin"),U().post(this.$store.state.dbapi+"login",{username:this.username,password:this.password}).then((e=>{console.log(e.data),"success"===e.data?(localStorage.setItem("userName",this.username),console.log("LocalStorage :",localStorage.getItem("userName")),alert("登入成功!"),this.$store.state.notLogin=!1,this.$router.push("/messageboard")):this.errorMsg="帳號或密碼輸入錯誤"})).catch((e=>console.log(e)))}}};const O=(0,r.Z)(N,[["render",I],["__scopeId","data-v-31dea83b"]]);var S=O;const q=e=>((0,a.dD)("data-v-0c3d54b2"),e=e(),(0,a.Cn)(),e),z={class:"home"},R={class:"mainbox d-flex flex-column align-items-center justify-content-center"},Z=q((()=>(0,a._)("h1",null,"Login / Message board",-1))),V=q((()=>(0,a._)("h2",null,"後端功能演示",-1)));function W(e,t,s,o,n,r){return(0,a.wg)(),(0,a.iD)("div",z,[(0,a._)("div",R,[Z,V,(0,a._)("button",{onClick:t[0]||(t[0]=(...e)=>r.toMsgBoard&&r.toMsgBoard(...e)),class:"button"},"進入留言板")])])}var H={data(){return{username:"",notLogin:!0}},methods:{toMsgBoard:function(){var e=localStorage.getItem("userName");console.log("username:",e),null==e?(alert("先登入吧!"),this.$router.push("/login")):this.$router.push("/messageboard")}}};const P=(0,r.Z)(H,[["render",W],["__scopeId","data-v-0c3d54b2"]]);var Y=P;const T=e=>((0,a.dD)("data-v-612db520"),e=e(),(0,a.Cn)(),e),K={class:"messageboard"},A={class:"container d-flex flex-column align-items-center"},E=T((()=>(0,a._)("h1",{class:"p-1"},"Message Board",-1))),F={class:"box"},G={class:"d-flex justify-content-center"},J={class:"row d-flex"},Q=T((()=>(0,a._)("div",{class:"m-2 col-2 fieldName"},"用戶名",-1))),X={class:"m-2 col-6"},ee={class:"row"},te=T((()=>(0,a._)("div",{class:"m-2 col-2 fieldName"},"留言",-1))),se={class:"d-flex justify-content-center"},oe=T((()=>(0,a._)("hr",null,null,-1))),ae={class:"list-group msgList"},ne={class:"d-flex justify-content-between mb-2"},re={style:{"margin-bottom":"0px"}},le=["onClick"],ie={class:"messageContent p-1"},de=T((()=>(0,a._)("hr",null,null,-1))),ce={class:"d-flex justify-content-center"},ue={key:0,class:"error"};function ge(e,t,s,n,r,l){const i=(0,a.up)("replyMessage");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",K,[(0,a._)("div",A,[E,(0,a._)("div",F,[(0,a._)("div",G,[(0,a._)("form",null,[(0,a._)("div",J,[Q,(0,a._)("div",X,(0,_.zw)(r.username),1)]),(0,a._)("div",ee,[te,(0,a.wy)((0,a._)("textarea",{class:"m-2 textbox col-9","onUpdate:modelValue":t[0]||(t[0]=e=>r.message=e)},null,512),[[o.nr,r.message]])]),(0,a._)("div",se,[(0,a._)("button",{onClick:t[1]||(t[1]=(...e)=>l.doMessage&&l.doMessage(...e)),class:"boardBtn my-1"},"發表")])])])])])]),oe,(0,a._)("ul",ae,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.list,(e=>((0,a.wg)(),(0,a.iD)("li",{class:".list-group-item msgcard m-2 p-3",key:e.id},[(0,a._)("div",ne,[(0,a._)("h3",re,"發言人："+(0,_.zw)(e.name),1),(0,a._)("button",{onClick:t=>l.delMessage(e.id),class:"btn danger-button"}," 刪除留言 ",8,le)]),(0,a._)("div",ie,[(0,a._)("div",null,(0,_.zw)(e.message),1)]),de,(0,a.Wm)(i,{id:e.id},null,8,["id"])])))),128)),(0,a._)("div",ce,[this.list[0]?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",ue," 沒有留言，或Server斷線可能要重開 "))])])],64)}const me={class:"list-group ms-5"},he={class:"d-flex justify-content-between"},pe={class:"d-flex align-items-center"},fe={key:0},ve={class:"ms-1"},_e=["onClick"],be={key:0,class:"replyBox p-1"},we={key:1},ye={class:"my-1"},xe={class:""};function ke(e,t,s,n,r,l){return(0,a.wg)(),(0,a.iD)("ul",me,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.replyList,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"list-group-item",key:e.id},[(0,a._)("div",he,[(0,a._)("div",pe,[this.replyList[0].id?((0,a.wg)(),(0,a.iD)("h4",fe,"回覆人:")):(0,a.kq)("",!0),(0,a._)("h4",ve,(0,_.zw)(e.name),1)]),(0,a._)("div",null,[this.replyList[0].id?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:t=>l.delMessage(e.id),class:"btn my-1 danger-button"}," 刪除 ",8,_e)):(0,a.kq)("",!0)])]),this.replyList[0].id?((0,a.wg)(),(0,a.iD)("div",be,(0,_.zw)(e.message),1)):(0,a.kq)("",!0),this.replyList[0].id?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",we,"尚未有任何回覆，寫下你的想法!"))])))),128)),this.messagebox?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:t[0]||(t[0]=(...e)=>l.openReplyBox&&l.openReplyBox(...e)),class:"btn boardBtn"}," 回覆 ")),(0,a._)("div",ye,[(0,a._)("div",xe,[this.messagebox?(0,a.wy)(((0,a.wg)(),(0,a.iD)("input",{key:0,type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>r.message=e),placeholder:"message",style:{width:"60vw"}},null,512)),[[o.nr,r.message]]):(0,a.kq)("",!0),this.messagebox?((0,a.wg)(),(0,a.iD)("button",{key:1,onClick:t[2]||(t[2]=(...e)=>l.doMessage&&l.doMessage(...e)),class:"btn conform-bottom my-1 mx-2"}," 留言! ")):(0,a.kq)("",!0)])])])}var Me={data(){return{replyList:[],messagebox:!1,username:localStorage.getItem("userName"),message:""}},props:["id"],methods:{openReplyBox:function(){this.messagebox=!0,console.log(this.id)},doMessage:function(){console.log("doMessage"),U().post(this.$store.state.dbapi+"reply",{name:this.username,message:this.message,rid:this.id}).then((e=>{console.log(e.data),"Create Message"===e.data?(alert("已回覆留言!"),this.$router.go(0)):this.errorMsg="意料外的錯誤"})).catch((e=>console.log(e)))},delMessage:function(e){console.log("delMessage"),U()["delete"](this.$store.state.dbapi+"reply/"+e).then((e=>{"delete"===e.data?(alert("刪除"),this.$router.go(0)):this.errorMsg="意料外的錯誤"})).catch((e=>console.log(e)))}},mounted(){U().post(this.$store.state.dbapi+"messageboard/reply",{messageBoardId:this.id}).then((e=>this.replyList=e.data)),this.messagebox=!1}};const $e=(0,r.Z)(Me,[["render",ke],["__scopeId","data-v-ef938142"]]);var Le=$e,De={components:{replyMessage:Le},data(){return{username:localStorage.getItem("userName"),message:"",list:[]}},methods:{doMessage:function(){console.log("doMessage"),U().post(this.$store.state.dbapi+"messageboard",{name:this.username,message:this.message}).then((e=>{console.log(e.data),"Create Message"===e.data?(alert("已留言!"),this.$router.go(0)):this.errorMsg="意料外的錯誤"})).catch((e=>console.log(e)))},delMessage:function(e){console.log("delMessage"),U()["delete"](this.$store.state.dbapi+"messageboard/"+e).then((e=>{"delete"===e.data?(alert("刪除"),this.$router.go(0)):this.errorMsg="意料外的錯誤"})).catch((e=>console.log(e)))}},mounted(){null==localStorage.getItem("userName")?(alert("先登入吧!"),this.$router.push("/login")):U().get(this.$store.state.dbapi+"messageboard").then((e=>this.list=e.data))}};const Ce=(0,r.Z)(De,[["render",ge],["__scopeId","data-v-612db520"]]);var je=Ce;const Ie=e=>((0,a.dD)("data-v-50b5aa1f"),e=e(),(0,a.Cn)(),e),Be={class:"register"},Ue={class:"container d-flex flex-column align-items-center"},Ne={class:"box"},Oe=Ie((()=>(0,a._)("h1",{class:"p-1"},"Register",-1))),Se={class:"d-flex justify-content-center"},qe=Ie((()=>(0,a._)("div",{class:"my-2"},"Username",-1))),ze=Ie((()=>(0,a._)("div",{class:"my-2"},"Password",-1))),Re={class:"d-flex justify-content-end"},Ze=(0,a.Uk)("sign in"),Ve={class:"error"};function We(e,t,s,n,r,l){const i=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",Be,[(0,a._)("div",Ue,[(0,a._)("div",Ne,[Oe,(0,a._)("div",Se,[(0,a._)("form",null,[(0,a._)("div",null,[qe,(0,a.wy)((0,a._)("input",{class:"textbox","onUpdate:modelValue":t[0]||(t[0]=e=>r.username=e),placeholder:"請輸入帳號"},null,512),[[o.nr,r.username]])]),(0,a._)("div",null,[ze,(0,a.wy)((0,a._)("input",{class:"textbox","onUpdate:modelValue":t[1]||(t[1]=e=>r.password=e),placeholder:"輸入密碼，5字以上",type:"password"},null,512),[[o.nr,r.password]])]),(0,a._)("div",Re,[(0,a.Wm)(i,{to:"/login"},{default:(0,a.w5)((()=>[Ze])),_:1})]),(0,a._)("div",Ve,(0,_.zw)(r.errorMsg),1),(0,a._)("button",{onClick:t[2]||(t[2]=(...e)=>l.doRegister&&l.doRegister(...e)),class:"button my-5"},"註冊")])])])])])}var He={data(){return{username:"",password:"",errorMsg:""}},methods:{doRegister:function(){this.password.length<5?alert("請輸入5字以上密碼"):U().post(this.$store.state.dbapi+"create_accounts",{username:this.username,password:this.password}).then((e=>{"Create Account!"===e.data?(alert("已成功註冊!"),this.$router.push("/login")):"重複帳號"===e.data?alert("該帳號已被使用!"):this.errorMsg="意料外錯誤"})).catch((e=>console.log(e)))}}};const Pe=(0,r.Z)(He,[["render",We],["__scopeId","data-v-50b5aa1f"]]);var Ye=Pe;const Te=[{path:"/",name:"home",components:{default:Y,nav:v}},{path:"/login",name:"login",components:{default:S,nav:v}},{path:"/messageboard",name:"messageboard",components:{default:je,nav:v}},{path:"/register",name:"register",components:{default:Ye,nav:v}}],Ke=(0,c.p7)({history:(0,c.r5)(),routes:Te});var Ae=Ke,Ee=s(65),Fe=(0,Ee.MT)({state:{dbapi:"https://wscart-server.herokuapp.com/",notLogin:!0},getters:{},mutations:{},actions:{},modules:{}});(0,o.ri)(d).use(Fe).use(Ae).mount("#app")}},t={};function s(o){var a=t[o];if(void 0!==a)return a.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,o,a,n){if(!o){var r=1/0;for(c=0;c<e.length;c++){o=e[c][0],a=e[c][1],n=e[c][2];for(var l=!0,i=0;i<o.length;i++)(!1&n||r>=n)&&Object.keys(s.O).every((function(e){return s.O[e](o[i])}))?o.splice(i--,1):(l=!1,n<r&&(r=n));if(l){e.splice(c--,1);var d=a();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[o,a,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,n,r=o[0],l=o[1],i=o[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(a in l)s.o(l,a)&&(s.m[a]=l[a]);if(i)var c=i(s)}for(t&&t(o);d<r.length;d++)n=r[d],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(c)},o=self["webpackChunklogin_msgboard"]=self["webpackChunklogin_msgboard"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[998],(function(){return s(8326)}));o=s.O(o)})();
//# sourceMappingURL=app.30bc32bd.js.map